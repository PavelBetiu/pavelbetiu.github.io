"use strict";(self["webpackChunkpavel_betiu_portfolio"]=self["webpackChunkpavel_betiu_portfolio"]||[]).push([[732],{54117:function(e,t,a){a.d(t,{C7:function(){return o},Gf:function(){return i},H6:function(){return n},SL:function(){return l},eK:function(){return c},md:function(){return r},uO:function(){return d}});a(70560);var s=a(74806);function n(e){const t={nodes:[],links:[],categories:[],legendData:[]};t.categories=e.graph.participants.map((e=>{const t={name:e};return t}));const a=new Map;return e.graph.edges.forEach((e=>{const t=e.source,s=e.target,n=a.get(`${s}-${t}`);if(n)n.value+=Number(e.weight.toFixed(2)),n.formatter+=`${t} -> ${s}: ${e.weight.toFixed(2)} <br />`,n.type=2;else{const n={source:t,target:s,value:Number(e.weight.toFixed(2)),formatter:`${t} -> ${s}: ${e.weight.toFixed(2)} <br />`,type:1};a.set(`${t}-${s}`,n)}})),t.links=Array.from(a.values()).map((e=>{const t={source:e.source,target:e.target,value:e.value,lineStyle:{curveness:.3,color:1===e.type?"source":"#000"},tooltip:{trigger:"item",formatter:e.formatter},symbol:1===e.type?["none","arrow"]:["arrow","arrow"],emphasis:{lineStyle:{width:1.5,opacity:1}}};return t})),t.legendData=e.graph.participants,t.nodes=e.graph.participants.map((a=>{const s={category:t.categories.findIndex((e=>e.name===a)),id:a,label:{show:!0},name:a,symbolSize:(e.participants[a]["CNAIndices.OUTDEGREE"]+e.participants[a]["CNAIndices.INDEGREE"])/33,value:Number((e.participants[a]["CNAIndices.OUTDEGREE"]+e.participants[a]["CNAIndices.INDEGREE"]).toFixed(2)),tooltip:{trigger:"item",formatter:"{b} <br /> In-degree + Out-degree = {c}"}};return s})),t}function i(e){function t(e,t){const a=[];for(const s in e){const n=e[s],i={category:t.findIndex((e=>e.name===s)),id:s,name:s,symbolSize:(n["CNAIndices.INDEGREE"]+n["CNAIndices.OUTDEGREE"])/30,value:Number((n["CNAIndices.INDEGREE"]+n["CNAIndices.OUTDEGREE"]).toFixed(2))};a.push(i)}return a}const a={categories:e.graph.participants.map((e=>{const t={name:e};return t})),links:e.graph.edges.map((e=>{const t={source:e.source,target:e.target,value:Number(e.weight.toFixed(2)),lineStyle:{width:1,curveness:.05}};return t})),nodes:[]};return a.nodes=t(e.participants,a.categories),a}function o(e){const t={columns:[{key:"ref",displayName:"Reference Identifier"},{key:"participant",displayName:"Participant"},{key:"text",displayName:"Text"},{key:"time",displayName:"Time"},{key:"importance",displayName:"Importance"},{key:"social_kb",displayName:"Social KB"},{key:"degree",displayName:"In Degree / Out Degree"}],rows:[]};return t.rows=(0,s.map)(e.contributions,(e=>(e.ref=e.ref||e.id,e.importance=Math.round(100*e.importance)/100,e.social_kb=Math.round(100*e.social_kb)/100,e.degree=`${Math.round(100*e.in_degree)/100} / ${Math.round(100*e.out_degree)/100}`,e))),t}function r(e){const t={columns:[{key:"name",displayName:"Name"},{key:"contributions",displayName:"Contributions Score"},{key:"skb",displayName:"Social KB"},{key:"outdegree",displayName:"Outdegree"},{key:"indegree",displayName:"Indegree"},{key:"betweenness",displayName:"Betweenness"},{key:"closeness",displayName:"Closeness"},{key:"eigenvector",displayName:"Eigenvector"}],rows:[]};for(const a in e.participants){const s={};s["name"]=a,s["contributions"]=Number(e.participants[a]["CNAIndices.CONTRIBUTIONS_SCORE"].toFixed(2)),s["skb"]=Number(e.participants[a]["CNAIndices.SOCIAL_KB"].toFixed(2)),s["outdegree"]=Number(e.participants[a]["CNAIndices.OUTDEGREE"].toFixed(2)),s["indegree"]=Number(e.participants[a]["CNAIndices.INDEGREE"].toFixed(2)),s["betweenness"]=Number(e.participants[a]["CNAIndices.BETWEENNESS"].toFixed(2)),s["closeness"]=Number(e.participants[a]["CNAIndices.CLOSENESS"].toFixed(2)),s["eigenvector"]=Number(e.participants[a]["CNAIndices.EIGENVECTOR"].toFixed(2)),t.rows.push(s)}return t}function c(e,t){const a={columns:[{key:"id",displayName:"ID"},{key:"task_type",displayName:"Task type"},{key:"params",displayName:"Params"},{key:"dataset",displayName:"Dataset"},{key:"time_submitted",displayName:"Time submitted"},{key:"processing_time",displayName:"Processing time"},{key:"status",displayName:"Status"},{key:"actions",displayName:"Actions"}],rows:[]};console.log(e);for(const s of e["jobs"]){const e={};e["id"]=s.id,e["params"]=s.params,e["dataset"]=s.dataset,e["task_type"]=s.type,e["time_submitted"]=s.submit_time,e["processing_time"]=s.elapsed_time,e["status"]=s.status,e["actions"]=t,a.rows.push(e)}return a}function l(e){const t={series:[]};for(const a of e.graph.participants){const s=[],n={name:a,type:"line",step:"end",data:s,showSymbol:!1},i=e.contributions.filter((e=>e.participant===a));i.sort(((e,t)=>e.id-t.id));let o=0;for(const e of i){const t=[e.id,Number((o+e.importance).toFixed(2))];o+=e.importance,n.data.push(t)}t.series.push(n)}return t}function d(e){const t={importance:[],social_kb:[],in_degree:[],out_degree:[]};return t.importance=e.contributions.map((e=>[e.id,Number(e.importance.toFixed(2))])),t.social_kb=e.contributions.map((e=>[e.id,Number(e.social_kb.toFixed(2))])),t.in_degree=e.contributions.map((e=>[e.id,Number(e.in_degree.toFixed(2))])),t.out_degree=e.contributions.map((e=>[e.id,Number(e.out_degree.toFixed(2))])),t}},86041:function(e,t,a){a.d(t,{Z:function(){return l}});var s={};a.r(s);var n=a(73396);function i(e,t,a,s,i,o){const r=(0,n.up)("p-column"),c=(0,n.up)("p-datatable");return(0,n.wg)(),(0,n.j4)(c,{value:a.data.rows,responsiveLayout:a.isScrollable?"scroll":"",scrollable:a.isScrollable,scrollHeight:a.setScrollHeight,stripedRows:!0},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data.columns,(t=>((0,n.wg)(),(0,n.j4)(r,{field:t.key,header:t.displayName,key:t.key,sortable:a.isSortable},(0,n.Nv)({_:2},[a.withCustomBody?{name:"body",fn:(0,n.w5)((({data:a})=>[(0,n.WI)(e.$slots,"column",{rowData:a,currentColumnData:t})])),key:"0"}:void 0]),1032,["field","header","sortable"])))),128))])),_:3},8,["value","responsiveLayout","scrollable","scrollHeight"])}var o={props:{data:s.TableInput,isScrollable:{type:Boolean,default:!0,required:!1},isSortable:{type:Boolean,default:!0,required:!1},withCustomBody:{type:Boolean,default:!1,required:!1},setScrollHeight:{type:String,default:"750px",required:!1}},data(){return{}}},r=a(40089);const c=(0,r.Z)(o,[["render",i]]);var l=c},73732:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}});var s=a(73396),n=a(87139);const i=e=>((0,s.dD)("data-v-7e5e03d6"),e=e(),(0,s.Cn)(),e),o={class:"bg-gradient-dark"},r=(0,s.uE)('<span class="mask bg-gradient-dark opacity-8" data-v-7e5e03d6></span><div class="container" data-v-7e5e03d6><div class="row justify-content-center" data-v-7e5e03d6><div class="col-lg-8 text-center mx-auto my-auto" data-v-7e5e03d6><h1 class="text-white" data-v-7e5e03d6>Processing Queue</h1></div></div></div>',2),c=i((()=>(0,s._)("div",{class:"position-absolute w-100 z-index-1 bottom-0"},[(0,s._)("svg",{class:"waves",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 24 150 40",preserveAspectRatio:"none","shape-rendering":"auto"},[(0,s._)("defs",null,[(0,s._)("path",{id:"gentle-wave",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"})]),(0,s._)("g",{class:"moving-waves"},[(0,s._)("use",{"xlink:href":"#gentle-wave",x:"48",y:"-1",fill:"rgba(255,255,255,0.40)"}),(0,s._)("use",{"xlink:href":"#gentle-wave",x:"48",y:"3",fill:"rgba(255,255,255,0.35)"}),(0,s._)("use",{"xlink:href":"#gentle-wave",x:"48",y:"5",fill:"rgba(255,255,255,0.25)"}),(0,s._)("use",{"xlink:href":"#gentle-wave",x:"48",y:"8",fill:"rgba(255,255,255,0.20)"}),(0,s._)("use",{"xlink:href":"#gentle-wave",x:"48",y:"13",fill:"rgba(255,255,255,0.15)"}),(0,s._)("use",{"xlink:href":"#gentle-wave",x:"48",y:"16",fill:"rgba(255,255,255,1)"})])])],-1))),l=[r,c],d={class:"container p-9"},u={class:"card shadow-lg"},p={key:0},m={href:""},g={key:1},y={key:2},b={key:3},k={key:4},v={key:5},f={key:6},w={key:7},h=["onClick"],N=["onClick"],_=["onClick"],S={key:8};function C(e,t,i,r,c,C){const D=(0,s.up)("Table");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",o,[(0,s._)("div",{class:"page-header min-vh-75 relative",style:(0,n.j5)({"background-image":"url("+a(90605)+")"})},l,4)]),(0,s._)("div",d,[(0,s._)("div",u,[(0,s.Wm)(D,{data:c.tableInputData,isScrollable:!0,withCustomBody:!0},{column:(0,s.w5)((({rowData:e,currentColumnData:t})=>["id"==t.key?((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("a",m,[(0,s._)("span",null,(0,n.zw)(e[t.key]),1)])])):"status"==t.key?((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("span",{class:(0,n.C_)(C.getStatusClass(e[t.key]))},(0,n.zw)(C.getStatusName(e[t.key])),3)])):"task_type"==t.key?((0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("span",null,(0,n.zw)(C.getTaskTypeName(e[t.key])),1)])):"dataset"==t.key?((0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("span",null,(0,n.zw)(C.checkDatasetnullity(e[t.key])),1)])):"time_submitted"==t.key?((0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("span",null,(0,n.zw)(C.convertTimestampToDateAndHour(e[t.key])),1)])):"processing_time"==t.key?((0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("span",null,(0,n.zw)(C.convertSecondsToHoursMinutesSeconds(e[t.key])),1)])):"params"==t.key?((0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("span",null,(0,n.zw)(C.getParamsbyTaskType(e)),1)])):"actions"==t.key?((0,s.wg)(),(0,s.iD)("div",w,[3===e.status&&3===e.task_type?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-primary btn-sm m-1 action-button",onClick:t=>C.downloadCSV(e.id)}," Download CSV ",8,h)):3===e.status&&1===e.task_type?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn btn-primary btn-sm m-1 action-button",onClick:t=>C.checkModelResults(e.id)}," Check Result ",8,N)):(0,s.kq)("",!0),3===e.status||4===e.status?((0,s.wg)(),(0,s.iD)("button",{key:2,class:"btn btn-outline-primary btn-sm m-1 action-button",onClick:t=>e.actions[1].action(e.id)}," Remove Job ",8,_)):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",S,(0,n.zw)(e[t.key]),1))])),_:1},8,["data"])])])],64)}a(70560),a(98858),a(61318),a(33228);var D=a(44161),x=a(86041),E=a(54117);class I{static async getJobsData(){const e=await D.Z.post("services/jobs",{});return console.log(e.data),e.data}static async getJobData(e){const t=await D.Z.post(`services/job/${e}`,{});return console.log(t.data),t.data}static async deleteJob(e){return await D.Z.post(`services/jobs/${e}/delete`,{})}static async getResult(e){return await D.Z.post(`services/jobs/${e}/result`,{})}}var T=a(37263),$={name:"ProcessingQueueView",data(){return{actions:[{name:"Perform action",styleClass:"btn-primary",action:this.performAction},{name:"Remove job",styleClass:"btn-outline-danger",action:this.deleteJob}],tableInputData:[],toastService:(0,s.f3)(T.F)}},components:{Table:x.Z},created(){this.getJobs()},methods:{getJobs(){I.getJobsData().then((e=>{this.tableInputData=(0,E.eK)(e,this.actions)})).catch((e=>{console.log(e)}))},checkModelResults(e){this.$router.push({path:"/models",query:{filterBy:"job_id",jobId:e}})},performAction(e){this.info("Perform action",`Performing action for id: ${e}`)},deleteJob(e){I.deleteJob(e).then((t=>{console.log(t.data),t.data.success&&(this.getJobs(),console.log(`Job with id ${e} deleted successfully.`))})).catch((e=>{console.error("Error deleting job:",e)}))},async downloadCSV(e){try{const t=await D.Z.post(`services/jobs/${e}/result`,null,{responseType:"blob"}),a="download.csv",s=new Blob([t.data],{type:"text/csv"}),n=URL.createObjectURL(s);let i=a;if(t.headers["content-disposition"]){const e=t.headers["content-disposition"],a=e.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);a&&(i=decodeURIComponent(a[1]))}const o=document.createElement("a");o.href=n,o.download=i,o.click(),URL.revokeObjectURL(n)}catch(t){console.error("Error downloading CSV:",t)}},getStatusClass(e){return 1==e?"badge bg-warning":2==e?"badge bg-info":3==e?"badge bg-success":4==e?"badge bg-danger":void 0},getStatusName(e){return 1==e?"Pending":2==e?"In progress":3==e?"Finished":4==e?"Error":void 0},getTaskTypeName(e){return 1==e?"Pipeline":2==e?"CSCL":3==e?"Predict":4==e?"Indices":5==e?"Offensive":6==e?"Sentiment":7==e?"Diacritics":8==e?"Answer generation":9==e?"Test generation":10==e?"Keywords":void 0},convertTimestampToDateAndHour(e){const t=1e3*e,a=new Date(t),s=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0"),o=String(a.getHours()).padStart(2,"0"),r=String(a.getMinutes()).padStart(2,"0"),c=String(a.getSeconds()).padStart(2,"0"),l=`${s}-${n}-${i}`,d=`${o}:${r}:${c}`;return`${l} ${d}`},convertSecondsToHoursMinutesSeconds(e){const t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=Math.floor(e%3600%60);return`${t}h ${a}m ${s}s`},checkDatasetnullity(e){return null==e?"-":e.name},getParamsbyTaskType(e){return null!=e.dataset?"-":3==e.task_type?"Model: "+e.params.model:void 0},success(e,t){this.toastService&&this.toastService.success(t,e)},info(e,t){this.toastService&&this.toastService.info(t,e)},error(e,t){this.toastService&&this.toastService.error(t,e)}}},R=a(40089);const A=(0,R.Z)($,[["render",C],["__scopeId","data-v-7e5e03d6"]]);var F=A},90605:function(e,t,a){e.exports=a.p+"img/curved13.9fb865d4.jpg"}}]);