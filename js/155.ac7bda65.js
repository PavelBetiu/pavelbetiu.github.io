"use strict";(self["webpackChunkpavel_betiu_portfolio"]=self["webpackChunkpavel_betiu_portfolio"]||[]).push([[155],{13155:function(s,t,e){e.r(t),e.d(t,{default:function(){return V}});var a=e(73396),i=e(87139);const n=s=>((0,a.dD)("data-v-0f4fdfb9"),s=s(),(0,a.Cn)(),s),d={class:"container"},r={class:"row"},o=n((()=>(0,a._)("div",{class:"col-lg-1"},null,-1))),c={class:"col-lg-10 d-flex justify-content-center flex-column"},l={class:"card d-flex blur justify-content-center p-4 shadow-lg my-sm-0 my-sm-6 mt-8 mb-5"},u=n((()=>(0,a._)("div",{class:"text-center"},[(0,a._)("p",{class:"h4 text-gradient text-primary"},"Dataset visualization")],-1))),h={key:0,class:"d-flex justify-content-center align-items-center ds-visual"},g={key:1,class:"ds-visual"},p={class:"row py-4 my-4"},f={class:"col-lg-2"},b=n((()=>(0,a._)("p",{class:"h6 text-gradient text-primary"},"Name",-1))),v={class:"h6"},_={class:"col-lg-2"},I=n((()=>(0,a._)("p",{class:"h6 text-gradient text-primary"},"Language",-1))),m={class:"h6"},w={class:"col-lg-2"},y=n((()=>(0,a._)("p",{class:"h6 text-gradient text-primary"},"No of tasks",-1))),D={class:"h6"},S={class:"col-lg-2"},k=n((()=>(0,a._)("p",{class:"h6 text-gradient text-primary"},"No of entries",-1))),x={class:"h6"},E={class:"col-lg-2"},C=n((()=>(0,a._)("p",{class:"h6 text-gradient text-primary"},"Process status",-1))),q={class:"col-lg-2"},L=n((()=>(0,a._)("p",{class:"h6 text-gradient text-primary"},"Indices",-1))),R={class:"d-flex justify-content-center"},N={key:4,class:"btn btn-success btn-sm mx-4",disabled:""},z=n((()=>(0,a._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1))),j=n((()=>(0,a._)("div",{class:"col-lg-1"},null,-1)));function P(s,t,e,n,P,O){const $=(0,a.up)("p-progress-spinner");return(0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(s.$style["body"])},[(0,a._)("div",d,[(0,a._)("div",r,[o,(0,a._)("div",c,[(0,a._)("div",l,[u,null===P.datasetInfo?((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)($)])):((0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("div",p,[(0,a._)("div",f,[b,(0,a._)("p",v,(0,i.zw)(P.datasetInfo.name),1)]),(0,a._)("div",_,[I,(0,a._)("p",m,(0,i.zw)(O.getLanguageName(P.datasetInfo.language)),1)]),(0,a._)("div",w,[y,(0,a._)("p",D,(0,i.zw)(P.datasetInfo.number_of_tasks),1)]),(0,a._)("div",S,[k,(0,a._)("p",x,(0,i.zw)(P.datasetInfo.number_of_entries),1)]),(0,a._)("div",E,[C,(0,a._)("label",{class:(0,i.C_)(O.getClassByStatus(P.datasetInfo.processed))},(0,i.zw)(P.status[P.datasetInfo.processed]),3)]),(0,a._)("div",q,[L,(0,a._)("label",{class:(0,i.C_)(O.getClassByStatus(P.datasetInfo.indices))},(0,i.zw)(P.status[P.datasetInfo.indices]),3)])]),(0,a._)("div",R,[1!==P.datasetInfo.processed&&2!==P.datasetInfo.processed?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[0]||(t[0]=(...s)=>O.processDataset&&O.processDataset(...s)),class:"btn btn-primary btn-sm mx-4"}," Process dataset ")):(0,a.kq)("",!0),3===P.datasetInfo.processed?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:t[1]||(t[1]=(...s)=>O.viewResults&&O.viewResults(...s)),class:"btn btn-success btn-sm mx-4"}," View results ")):(0,a.kq)("",!0),1!==P.datasetInfo.indices&&2!==P.datasetInfo.indices?((0,a.wg)(),(0,a.iD)("button",{key:2,onClick:t[2]||(t[2]=(...s)=>O.getIndices&&O.getIndices(...s)),class:"btn btn-primary btn-sm mx-4"}," Process Indices ")):(0,a.kq)("",!0),3!==P.datasetInfo.indices||P.isDownloadingIndices?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:3,onClick:t[3]||(t[3]=(...s)=>O.downloadIndices&&O.downloadIndices(...s)),class:"btn btn-success btn-sm mx-4"}," Download indices ")),3===P.datasetInfo.indices&&P.isDownloadingIndices?((0,a.wg)(),(0,a.iD)("button",N,[z,(0,a.Uk)(" Downloading indices... ")])):(0,a.kq)("",!0)])]))])]),j])])],2)}e(70560),e(98858),e(61318),e(33228);var O=e(37263),$=e(19223),B={name:"DatasetView",data(){return{toastService:null,datasetsService:null,datasetId:null,datasetInfo:null,languages:[],status:{0:"NOT PROCESSED",1:"PENDING",2:"IN PROGRESS",3:"COMPLETED",4:"FAILED"},isDownloadingIndices:!1}},created(){this.toastService=(0,a.f3)(O.F),this.datasetService=(0,a.f3)($.M)},mounted(){this.datasetId=this.$route.params.dataset_id,this.datasetService.getLanguages().then((s=>{this.languages=s["languages"],this.datasetService.getDataset(this.datasetId).then((s=>{this.datasetInfo=s})).catch((s=>{this.error("Error","Error loading dataset")}))})).catch((s=>this.error("Error",s)))},methods:{viewResults(){this.$router.push({path:"/models",query:{filterBy:"dataset_id",datasetId:this.$route.params.dataset_id}})},processDataset(){this.datasetService.processDataset({dataset_id:this.datasetId}).then((s=>{this.success("Success","Dataset processing has been queued"),this.datasetInfo=null,this.datasetService.getDataset(this.datasetId).then((s=>{this.datasetInfo=s})).catch((s=>{this.error("Error","Error reloading dataset")}))})).catch((s=>{this.error("Error","Error while queuing dataset processing")}))},getIndices(){this.datasetService.getIndices(this.datasetId).then((s=>{this.success("Success","Indices processing has been queued"),this.datasetInfo=null,this.datasetService.getDataset(this.datasetId).then((s=>{this.datasetInfo=s})).catch((s=>{this.error("Error","Error reloading dataset")}))})).catch((s=>{this.error("Error","Error while queuing indices processing")}))},downloadIndices(){this.isDownloadingIndices=!0,this.datasetService.downloadIndices(this.datasetInfo.indices_job_id).then((s=>{let t=new Blob([s.data],{type:"application/octet-stream"});this.saveAs(t,`${this.datasetInfo.name}_indices.zip`)})).catch((s=>{this.error("Error","Error while downloading indices")})).finally((()=>{this.isDownloadingIndices=!1}))},saveAs(s,t){const e=window.URL.createObjectURL(s),a=document.createElement("a");a.style.display="none",a.href=e,a.download=t,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(e),document.body.removeChild(a)},getLanguageName(s){return this.languages.find((t=>t.id===s)).label},getClassByStatus(s){const t={0:"badge rounded-pill bg-secondary",1:"badge rounded-pill bg-warning",2:"badge rounded-pill bg-info",3:"badge rounded-pill bg-success",4:"badge rounded-pill bg-danger"};return t[s]},success(s,t){this.toastService&&this.toastService.success(t,s)},info(s,t){this.toastService&&this.toastService.info(t,s,-1)},error(s,t){this.toastService&&this.toastService.error(t,s,-1)}}},U={body:"DatasetView_body_Ttvhh"},A=e(40089);const M={};M["$style"]=U;const T=(0,A.Z)(B,[["render",P],["__cssModules",M],["__scopeId","data-v-0f4fdfb9"]]);var V=T}}]);