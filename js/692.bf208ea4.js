"use strict";(self["webpackChunkpavel_betiu_portfolio"]=self["webpackChunkpavel_betiu_portfolio"]||[]).push([[692],{94692:function(e,s,t){t.r(s),t.d(s,{default:function(){return ee}});var a=t(73396),l=t(87139);const i={class:"p-5 mt-5 mx-6 w-100"},r={class:"row"},n={class:"col-4"},o={class:"w-75 mt-5 ml-4"},c={class:"col-8 d-flex justify-content-center"},d={class:"form-control diacritics-result-container"},u=["innerHTML"],g=["set"],h={class:"form-control keywords-result-container"},p=["innerHTML"],k={class:"d-flex flex-wrap keywords-list"};function m(e,s,t,m,v,y){const b=(0,a.up)("LanguageDropdown"),w=(0,a.up)("TaskInputForm");return(0,a.wg)(),(0,a.iD)("div",{class:(0,l.C_)(e.$style["body"])},[(0,a._)("div",i,[(0,a._)("div",r,[(0,a._)("div",n,[(0,a._)("div",o,[(0,a.Wm)(b,{tasks:v.tasks,languages:v.languages,onLanguageSelect:y.onLanguageSelect,onTaskSelect:y.onTaskSelect},null,8,["tasks","languages","onLanguageSelect","onTaskSelect"])])]),(0,a._)("div",c,[v.isTaskSelected?((0,a.wg)(),(0,a.iD)("div",{class:"w-75",key:v.refresh},[3===v.selectedTaskId?((0,a.wg)(),(0,a.j4)(w,{key:0,title:y.selectedTask.name,processText:y.processText,clearForm:y.clearForm},(0,a.Nv)({_:2},[null!==v.result?{name:"body",fn:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("div",{innerHTML:y.highlightingDiacritics(v.text,v.result.text)},null,8,u)])])),key:"0"}:void 0]),1032,["title","processText","clearForm"])):2===v.selectedTaskId||0===v.selectedTaskId?((0,a.wg)(),(0,a.j4)(w,{key:1,title:y.selectedTask.name,processText:y.processText,clearForm:y.clearForm},(0,a.Nv)({_:2},[null!==v.result?{name:"sub-body",fn:(0,a.w5)((()=>[(0,a._)("div",{class:"d-flex flex-row justify-content-between align-items-center",set:e.labelsAndScores=y.markHighestScoredLabel(v.result.labels)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(e.labelsAndScores),(s=>((0,a.wg)(),(0,a.iD)("div",{key:s,class:(0,l.C_)(["form-control m-1",e.labelsAndScores[s].isHighest?"badge bg-success":"badge bg-secondary"])},(0,l.zw)(s)+": "+(0,l.zw)(e.labelsAndScores[s].score),3)))),128))],8,g)])),key:"0"}:void 0]),1032,["title","processText","clearForm"])):4===v.selectedTaskId?((0,a.wg)(),(0,a.j4)(w,{key:2,title:y.selectedTask.name,processText:y.processText,clearForm:y.clearForm},(0,a.Nv)({_:2},[null!==v.result?{name:"body",fn:(0,a.w5)((()=>[(0,a._)("div",h,[(0,a._)("div",{innerHTML:y.highlightKeywords(v.text,v.result.keywords)},null,8,p)])])),key:"0"}:void 0,null!==v.result?{name:"sub-body",fn:(0,a.w5)((()=>[(0,a._)("div",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(v.result.keywords,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"badge bg-secondary m-2"},(0,l.zw)(e),1)))),128))])])),key:"1"}:void 0]),1032,["title","processText","clearForm"])):((0,a.wg)(),(0,a.j4)(w,{key:3,title:y.selectedTask.name,processText:y.processText},null,8,["title","processText"]))])):(0,a.kq)("",!0)])])])],2)}t(70560);var v=t(49242);const y={class:"card p-3"},b={class:"input-group mb-6"},w=(0,a._)("div",{class:"row w-100"},[(0,a._)("div",{class:"col-12 ml-3"},[(0,a._)("label",null,"Select language:")])],-1),f={class:"row w-100"},T={class:"col-12"},x=(0,a._)("option",{value:"-1",disabled:"",selected:""},"Click to select",-1),_=["value"],S=(0,a._)("div",{class:"row w-100"},[(0,a._)("div",{class:"col-12 ml-3"},[(0,a._)("label",null,"Available tasks:")])],-1),D={class:"list-group p-3"},I=["onClick"];function F(e,s,t,i,r,n){return(0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",b,[w,(0,a._)("div",f,[(0,a._)("div",T,[(0,a.wy)((0,a._)("select",{class:"form-control",name:"language-button",id:"language-button","onUpdate:modelValue":s[0]||(s[0]=e=>r.langID=e)},[x,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.languages,(({id:e,label:s})=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e},(0,l.zw)(s),9,_)))),128))],512),[[v.bM,r.langID]])])])]),S,(0,a._)("div",D,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.tasksByLanguage,(({id:e,name:s,isActive:t})=>((0,a.wg)(),(0,a.iD)("a",{key:e,href:"javascript:;",onClick:s=>n.selectTask(e),class:(0,l.C_)("list-group-item list-group-item-action "+n.active(t))},(0,l.zw)(s),11,I)))),128))])])}var L={name:"LanguageDropdown",props:{languages:Array,tasks:Array,onTaskSelect:Function,onLanguageSelect:Function},data(){return{langID:-1,selectedTaskId:-1}},methods:{selectTask(e){this.selectedTaskId=e,this.onTaskSelect(e)},active(e){return e?"active":""}},computed:{tasksByLanguage(){let e=[];return this.tasksWithSelectedStatus.forEach((s=>{s["languages"].includes(this.langID)&&e.push(s)})),e},tasksWithSelectedStatus(){let e=[];return this.tasks.forEach((s=>{let t={id:s.id,name:s.name,isActive:s.id===this.selectedTaskId,languages:s.languages};e.push(t)})),e}},watch:{langID:function(e,s){this.selectedTaskId=-1,this.onLanguageSelect(e)}}},P=t(40089);const A=(0,P.Z)(L,[["render",F]]);var $=A;const j={id:"textAnalysisForm",class:"card"},H={class:"card-header"},W={class:"text-center w-100 d-flex justify-content-center"},E={class:"badge rounded-pill bg-light text-dark"},C={class:"card-body"},K={class:"text-lg-left text-center px-2"},M={class:"form-group"},z={class:"card-footer"},N={class:"w-100 d-flex justify-content-center"},O={key:1,type:"button",class:"btn bg-gradient-primary w-100",disabled:""},R=(0,a._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1);function U(e,s,t,i,r,n){return(0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("div",H,[(0,a.WI)(e.$slots,"over-header"),(0,a.WI)(e.$slots,"header",{},(()=>[(0,a._)("div",W,[(0,a._)("span",E,(0,l.zw)(t.title),1)])])),(0,a.WI)(e.$slots,"sub-header")]),(0,a._)("div",C,[(0,a.WI)(e.$slots,"over-body"),(0,a.WI)(e.$slots,"body",{},(()=>[(0,a._)("div",K,[(0,a._)("div",M,[r.isLoading||r.doneProcessing?r.isLoading||r.doneProcessing?(0,a.wy)(((0,a.wg)(),(0,a.iD)("textarea",{key:1,class:"form-control",id:"textInputBoxDisabled",rows:"15","onUpdate:modelValue":s[1]||(s[1]=e=>r.text=e),disabled:""},null,512)),[[v.nr,r.text]]):(0,a.kq)("",!0):(0,a.wy)(((0,a.wg)(),(0,a.iD)("textarea",{key:0,class:"form-control",id:"textInputBox",rows:"15","onUpdate:modelValue":s[0]||(s[0]=e=>r.text=e),placeholder:"Please insert your text here..."},null,512)),[[v.nr,r.text]])])])])),(0,a.WI)(e.$slots,"sub-body")]),(0,a._)("div",z,[(0,a.WI)(e.$slots,"over-footer"),(0,a.WI)(e.$slots,"footer",{},(()=>[(0,a._)("div",N,[r.isLoading||r.doneProcessing?r.isLoading?((0,a.wg)(),(0,a.iD)("button",O,[R,(0,a.Uk)(" Processing... ")])):r.doneProcessing?((0,a.wg)(),(0,a.iD)("button",{key:2,type:"button",class:"btn bg-gradient-primary w-100",onClick:s[3]||(s[3]=e=>n.clear())}," New Process ")):(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",class:"btn bg-gradient-primary w-100",onClick:s[2]||(s[2]=e=>n.process())},"Process"))])])),(0,a.WI)(e.$slots,"sub-footer")])])}var V=t(78149),B={name:"TaskInputForm",props:{title:{type:String,optional:!1},processText:{type:Function,optional:!1},clearForm:{type:Function,optional:!0,default:void 0}},data(){return{text:"",isLoading:!1,doneProcessing:!1}},methods:{clear(){this.text="",this.doneProcessing=!1,void 0!==this.clearForm&&this.clearForm()},async process(){this.isLoading=!0;let e=await this.processText(this.text);this.isLoading=!1,e&&(this.doneProcessing=!0)}}};const Y=(0,P.Z)(B,[["render",U]]);var Z=Y,q=t(37263),G={name:"TextAnalysisView",components:{LanguageDropdown:$,TaskInputForm:Z},data(){return{text:"",langID:-1,selectedTaskId:-1,isTaskSelected:!1,result:null,taService:null,tasks:null,languages:null,toastService:null,refresh:0}},created(){this.taService=(0,a.f3)(V.l),this.toastService=(0,a.f3)(q.F),this.tasks=[{id:0,name:"Sentiment Analysis",languages:[3],process:this.taService.sentimentAnalysis,payloadTemplate:{text:null}},{id:2,name:"Offensive Language",languages:[3],process:this.taService.offensiveLanguage,payloadTemplate:{text:null}},{id:3,name:"Diacritics Restoration",languages:[3],process:this.taService.restoreDiacritics,payloadTemplate:{text:null}},{id:4,name:"Keyword Extraction",languages:[3,8],process:this.taService.getKeywords,payloadTemplate:{text:null,lang:null}}],this.languages=[{id:1,label:"EN"},{id:2,label:"FR"},{id:3,label:"RO"},{id:4,label:"ES"},{id:5,label:"DE"},{id:6,label:"RU"},{id:7,label:"IT"},{id:8,label:"NL"}]},methods:{onLanguageSelect(e){this.langID=e,this.selectedTaskId=-1,this.isTaskSelected=!1},onTaskSelect(e){this.selectedTaskId=e,this.isTaskSelected=!0,this.clearForm()},async processText(e){if(void 0===this.selectedTask.process)return this.error("Error","This task is not available yet"),!1;let s=e.trim();if(0==s.length)return this.error("Error","Please enter some text"),!1;this.text=e;let t=this.selectedTask.payloadTemplate;t.text=this.text,"lang"in t&&(t.lang=this.langID);try{this.info("Sent for processing","Please wait..."),this.result=await this.selectedTask.process(t),this.success("Task completed","Please check the results down below")}catch(a){this.error("Error",a.message),this.clearForm()}return!0},clearForm(){this.result=null,this.refresh=(this.refresh+1)%2},highlightingDiacritics(e,s){let t=[],a=-1,l=-1,i=!1;for(let o=0;o<e.length;o++)" \t\n.,".includes(e[o])?-1!=a&&(l=o-1,i&&t.push({start:a,end:l}),a=-1,l=-1,i=!1):(-1==a&&(a=o),e[o]!=s[o]&&(i=!0));-1!=a&&(l=e.length-1,i&&t.push({start:a,end:l}));let r="",n=0;for(let o=0;o<s.length;o++)if(n>=t.length)r+=s[o];else{if(o==t[n].start)r+="<span class='diacritics-highlight'>";else if(o==t[n].end){r+=s[o],r+="</span>",n++;continue}r+=s[o]}return r},markHighestScoredLabel(e){const s=Math.max(...Object.values(e));let t={};for(const a of Object.keys(e))t[a]={score:parseFloat(e[a]).toFixed(4),isHighest:e[a]===s};return t},highlightKeywords(e,s){let t=e;return s.forEach((e=>{const s=e.split(" "),a=new RegExp(`(${s.map((e=>`\\b${e}\\b`)).join(".*?")})`,"gi");t=t.replace(a,(e=>`<span class="keywords-highlight">${e}</span>`))})),t},success(e,s){this.toastService&&this.toastService.success(s,e)},info(e,s){this.toastService&&this.toastService.info(s,e)},error(e,s){this.toastService&&this.toastService.error(s,e,-1)}},computed:{selectedTask(){return this.tasks.find((e=>e.id===this.selectedTaskId))}}},J={body:"TextAnalysisView_body_PgDbZ"};const Q={};Q["$style"]=J;const X=(0,P.Z)(G,[["render",m],["__cssModules",Q]]);var ee=X}}]);